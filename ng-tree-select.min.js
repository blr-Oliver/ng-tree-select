angular.module("ngTreeSelect",["RecursionHelper","ngCssInjector","ngSlideAnimations"]).directive("treeSelect",["RecursionHelper",function(e){var t=10;return{restrict:"E",require:["?ngModel"],replace:!0,templateUrl:"ng-tree-select.html",cssUrl:"ng-tree-select.css",scope:{items:"=",depth:"=?",layout:"@?"},compile:function(i){return e.compile(i,function(e,i,n,l){!function(e){if(e.depth=e.depth||0,isNaN(+e.layout)||(e.layout=+e.layout),"string"==typeof e.layout)switch(e.layout=e.layout.trim().toLowerCase(),e.layout){case"radio":case"select":break;default:e.layout=t}else e.layout=e.layout>0?e.layout:t;e.$treeSelectId=e.$id}(e),function(e){e.$watch(function(){return e.items&&e.items.map(function(e){return!!e.active})},function(t){e.$emit("ngTreeSelect.change",e.$treeSelectId),e.items&&(e.items.active=e.items[t.indexOf(!0)])},!0)}(e),l[0]&&function(e,t){function i(e,t){function n(e){return(e.active=e===t||e.children&&i(e.children,t))&&e}for(var l=e.active&&n(e.active)||void 0,c=0;c<e.length;++c)e[c]!==e.active&&n(e[c])&&(l?e[c].active=!1:l=e[c]);return!!(e.active=l)}t.$render=function(){e.items&&i(e.items,t.$viewValue)},e.$on("ngTreeSelect.change",function(){e.$evalAsync(function(){t.$setViewValue(function(e){for(var t=e&&e.active;t&&t.children&&t.children.active;)t=t.children.active;return t}(e.items))})})}(e,l[0])})}}}]).directive("booleanRadio",["$document","$parse",function(e,t){var i=Array.prototype.filter;return{restrict:"A",link:function(n,l,c){var a=t(c.booleanRadio);l.prop("checked",a(n)),l.bind("click",function(){if(this.checked){n.$applyAsync(function(){a.assign(n,!0)});var t='input[name="'+l.attr("name")+'"]';i.call(e[0].querySelectorAll(t),function(e){return e!==l[0]}).forEach(function(e){angular.element(e).triggerHandler("deselect")})}else n.$applyAsync(function(){a.assign(n,!1)})}),l.bind("deselect",function(){this.checked=!1,n.$applyAsync(function(){a.assign(n,!1)})})}}}]).directive("booleanSelect",[function(){return{restrict:"A",link:function(e,t,i,n){t.on("change input blur",function(){for(var e=this.options.length;e--;){var t=this.options[e],i=angular.element(t).controller("booleanSelectOption");i&&i.update(t.selected)}})}}}]).directive("booleanSelectOption",[function(){return{restrict:"A",require:"booleanSelectOption",controller:["$scope",function(e){this.update=function(t){e.$applyAsync(this.targetProperty+" = "+!!t)}}],link:function(e,t,i,n){n.targetProperty=i.booleanSelectOption}}}]).animation(".tree-select",["slideAnimations",function(e){return{enter:e.down,leave:e.up}}]).run(["$templateCache",function(e){e.put("ng-tree-select.html",'<div class="tree-select"><ul ng-if="layout === \'radio\' || items.length <= layout"><li ng-repeat="item in items"><label ng-class="{active: item.active, inactive : item.active === false}"><input type="{{items.length > 1 && !item.active ? \'radio\' : \'checkbox\'}}" name="tree-{{$treeSelectId}}-level-{{depth}}" boolean-radio="item.active" /><span ng-bind="item.name"></span></label><tree-select ng-if="item.active && item.children.length" items="item.children" depth="depth + 1" layout="{{item.layout || layout}}"></tree-select></li></ul><ul ng-if="layout === \'select\' || items.length > layout"><li><select boolean-select ng-class="{active: items.active, inactive : items.active === null}"><option>&mdash;</option><option ng-repeat="item in items" boolean-select-option="item.active" ng-bind="item.name" ng-selected="item.active"></option></select><tree-select ng-if="items.active && items.active.children.length" items="items.active.children" depth="depth + 1" layout="{{items.active.layout || layout}}"></tree-select></li></ul></div>'),e.put("ng-tree-select.css",".tree-select{padding-left:1em;overflow-y:hidden;transition-property:height;transition-duration:.2s;transition-timing-function:ease-in}.tree-select>ul{list-style-type:none;padding-left:0}.tree-select label{display:inline-block;height:1.5em;margin-bottom:0;margin-top:0;white-space:nowrap}.tree-select label>*{vertical-align:middle;white-space:nowrap}.tree-select label>input[type=checkbox],.tree-select label>input[type=radio]{margin:0;width:1em;height:1em}.tree-select label>span{padding-left:.3em}.tree-select select{padding-left:1em;font-size:100%;font-family:inherit;height:1.3em;margin-bottom:.2em}")}]);